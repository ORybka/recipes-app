{"version":3,"sources":["utils.js","index.js"],"names":["recipesData","allowedRecipes","getRecipe","recipeName","getRandomURL","likedRecipe","window","dataStore","currentRecipe","randomRecipe","isDataLoading","error","recipeList","GetRandomRecipe","renderApp","showList","performSearch","RECIPES_NUM","document","getElementById","innerHTML","App","RecipeResults","content","renderRecipe","showLikedRecipesButton","RenderRandomBtn","renderRandomRecipe","SearchByDish","url","response","fetch","ok","Error","statusText","results","json","meals","e","strMeal","strCategory","strInstructions","Object","keys","length","constructor","optionList","forEach","el","push","getCurrentRecipeData","recipeData","addLikeButton","recipe","ShowLikedRecipes","querySelector","map","style","display"],"mappings":"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","file":"recipes-app.eaf3eca4.js","sourceRoot":"..","sourcesContent":["export const recipesData = {};\nexport const allowedRecipes = [\n  'Pizza Express Margherita',\n  'Mediterranean Pasta Salad',\n  'Banana Pancakes',\n];\nexport function getRecipe(recipeName) {\n  return `https://www.themealdb.com/api/json/v1/1/search.php?s=${recipeName}`;\n}\nexport function getRandomURL() {\n  return 'https://www.themealdb.com/api/json/v1/1/random.php';\n}\n","import { allowedRecipes, getRecipe, getRandomURL } from './utils';\n\nwindow.dataStore = {\n  currentRecipe: '',\n  randomRecipe: {},\n  isDataLoading: false,\n  error: null,\n  recipeList: {},\n  likedRecipe: '',\n};\n\nlet likedRecipe;\nwindow.GetRandomRecipe = GetRandomRecipe;\nwindow.likedRecipe = likedRecipe;\nwindow.renderApp = renderApp;\nwindow.showList = showList;\nwindow.performSearch = performSearch;\nconst RECIPES_NUM = 3;\n\nrenderApp();\n\nfunction renderApp() {\n  document.getElementById('app-root').innerHTML = `\n        ${App()}\n    `;\n}\n\nfunction RecipeResults() {\n  const { currentRecipe, isDataLoading, error } = window.dataStore;\n  let content = '';\n  if (currentRecipe === '') {\n    content = 'Search by recipe name';\n  } else {\n    if (isDataLoading) {\n      content = 'Loading ...';\n    }\n\n    if (error !== null) {\n      content = error;\n    }\n\n    // if (isCurrentRecipeDataLoaded()) {\n    content = `\n      ${renderRecipe()}\n      <br>\n      ${showLikedRecipesButton()}\n      `;\n    // }\n  }\n\n  return `<div>${content}</div>`;\n}\n\nfunction App() {\n  return `\n  <div>\n    ${RenderRandomBtn()}\n    <br>\n    ${renderRandomRecipe()}\n    <br>\n    ${SearchByDish()}\n    <br>\n    ${RecipeResults()}\n  </div>\n  `;\n}\n\nfunction RenderRandomBtn() {\n  return `\n    <button id=\"random-recipe-btn\" onclick=\"window.GetRandomRecipe(); window.renderApp();\">Click to get a recipe</button>\n    <br>\n  `;\n  // <div>${renderRandomRecipe()}</div>\n}\n\nasync function GetRandomRecipe() {\n  const url = getRandomURL();\n  window.dataStore.error = null;\n  window.dataStore.isDataLoading = true;\n\n  try {\n    window.dataStore.isDataLoading = false;\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw Error(response.statusText);\n    } else {\n      const results = await response.json();\n      window.dataStore.randomRecipe = results.meals[0];\n    }\n  } catch (e) {\n    window.dataStore.error = 'Some error ocurred...';\n  } finally {\n    renderApp();\n  }\n}\n\nfunction renderRandomRecipe() {\n  const { randomRecipe } = window.dataStore;\n  let content = '';\n\n  const { strMeal, strCategory, strInstructions } = randomRecipe;\n  if (Object.keys(randomRecipe).length === 0 && randomRecipe.constructor === Object) {\n    content = '';\n  } else {\n    content += `<div>Your meal today is ${strMeal} from ${strCategory} category.</div><br>`;\n    content += `<div>Please, follow the instructions to cook ${strMeal}:</div><br>`;\n    content += `<div>${strInstructions}</div><br>`;\n  }\n\n  return `<div>${content}</div>`;\n}\n\n// function isCurrentRecipeDataLoaded() {\n//   return Boolean(getCurrentRecipeData());\n// }\n\nasync function performSearch(recipeName) {\n  const url = getRecipe(recipeName);\n  window.dataStore.currentRecipe = recipeName;\n  window.dataStore.error = null;\n  window.dataStore.isDataLoading = true;\n\n  try {\n    window.dataStore.isDataLoading = false;\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw Error(response.statusText);\n    } else {\n      const results = await response.json();\n      window.dataStore.recipeList[recipeName] = results.meals;\n    }\n  } catch (e) {\n    window.dataStore.error = 'Some error ocurred...';\n  } finally {\n    renderApp();\n  }\n}\n\nfunction SearchByDish() {\n  const optionList = [];\n  allowedRecipes.forEach(el => optionList.push(`<option value=\"${el}\"></option>`));\n\n  return `\n    <input \n      type=\"search\" \n      id=\"search-recipe-input\" \n      list=\"recipe-list\" placeholder=\"Choose recipe\" \n      onchange=\"window.performSearch(this.value)\" \n      autocomplete=\"off\"\n    >\n    <datalist id=\"recipe-list\">\n    ${optionList}\n    </datalist>\n    <br><br>\n  `;\n}\n\nfunction getCurrentRecipeData() {\n  const { currentRecipe, recipeList } = window.dataStore;\n  return recipeList[currentRecipe];\n}\n\nfunction renderRecipe() {\n  const { currentRecipe } = window.dataStore;\n  const recipeData = getCurrentRecipeData();\n  let content = '';\n\n  if (recipeData) {\n    const { strInstructions } = recipeData[0];\n\n    content += `<div><h3>${currentRecipe}</h3></div>`;\n    content += `<div>${strInstructions}</div><br>`;\n    content += `${addLikeButton(currentRecipe)}`;\n  }\n  return content ? `<div>${content}</div>` : '';\n}\n\nfunction addLikeButton(recipe) {\n  window.likedRecipe = recipe;\n  return `\n  <button id=\"like-recipe-btn\" onclick=\"window.dataStore.likedRecipe = likedRecipe; window.renderApp();\">Click to add this recipe<br>to your favorite</button>`;\n}\n\nfunction showLikedRecipesButton() {\n  let content = '';\n  content += `<button id=\"show-btn\" onclick=\"window.showList();\">Click to see your favorite recipes</button>`;\n  content += `<div>${ShowLikedRecipes()}</div>`;\n  return `<div>${content}</div>`;\n}\n\nfunction ShowLikedRecipes() {\n  return `\n    <div id=\"liked-title\" class=\"_hidden_7ad08\"><h3>List of your favorite recipes:</h3></div>\n    <div id=\"liked-list\" class=\"_hidden_7ad08\">${window.dataStore.likedRecipe}</div>`;\n}\n\nfunction showList() {\n  const elemArr = [document.querySelector('#liked-title'), document.querySelector('#liked-list')];\n  elemArr.map(el => {\n    el.style.display === 'block' ? (el.style.display = 'none') : (el.style.display = 'block');\n  });\n}\n"]}